-- MySQL Script generated by MySQL Workbench
-- 04/04/15 02:16:35
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema inf226g1
-- -----------------------------------------------------
-- DROP SCHEMA IF EXISTS `inf226g1` ;

-- -----------------------------------------------------
-- Schema inf226g1
-- -----------------------------------------------------
-- CREATE SCHEMA IF NOT EXISTS `inf226g1` 

ALTER SCHEMA `inf226g1` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `inf226g1` ;

-- -----------------------------------------------------
-- Table `inf226g1`.`Condicion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Condicion` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Condicion` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(60) NULL,
  `descripcion` VARCHAR(200) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Almacen`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Almacen` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Almacen` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(200) NULL,
  `capacidad` INT NULL,
  `area` INT NULL,
  `fecha_registro` DATETIME NULL,
  `estado` VARCHAR(20) NULL,
  `ubic_libres` INT NULL,
  `id_tipo_almacen` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Almacen_Tipo_Almacen_idx` (`id_tipo_almacen` ASC),
  CONSTRAINT `fk_Almacen_Tipo_Almacen`
    FOREIGN KEY (`id_tipo_almacen`)
    REFERENCES `inf226g1`.`Condicion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Rack`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Rack` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Rack` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `num_fil` INT NULL,
  `num_col` INT NULL,
  `estado` VARCHAR(20) NULL,
  `fecha_registro` DATETIME NULL,
  `id_almacen` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Rack_Almacen1_idx` (`id_almacen` ASC),
  CONSTRAINT `fk_Rack_Almacen1`
    FOREIGN KEY (`id_almacen`)
    REFERENCES `inf226g1`.`Almacen` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Ubicacion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Ubicacion` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Ubicacion` (
  `id` INT NOT NULL,
  `fila` INT NULL,
  `columna` INT NULL,
  `lado` VARCHAR(1) NULL,
  `id_rack` INT NOT NULL,
  `estado` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Ubicacion_Rack1_idx` (`id_rack` ASC),
  CONSTRAINT `fk_Ubicacion_Rack1`
    FOREIGN KEY (`id_rack`)
    REFERENCES `inf226g1`.`Rack` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Tipo_Pallet`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Tipo_Pallet` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Tipo_Pallet` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(200) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Tipo_Unidad_Transporte`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Tipo_Unidad_Transporte` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Tipo_Unidad_Transporte` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(200) NULL,
  `Condicion_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Tipo_Unidad_Transporte_Condicion1_idx` (`Condicion_id` ASC),
  CONSTRAINT `fk_Tipo_Unidad_Transporte_Condicion1`
    FOREIGN KEY (`Condicion_id`)
    REFERENCES `inf226g1`.`Condicion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Unidad_Transporte`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Unidad_Transporte` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Unidad_Transporte` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `transportista` VARCHAR(60) NULL,
  `placa` VARCHAR(6) NULL,
  `capacidad` INT NULL,
  `id_tipo_unidad_transporte` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Unidad_Transporte_Tipo_Unidad_Transporte1_idx` (`id_tipo_unidad_transporte` ASC),
  CONSTRAINT `fk_Unidad_Transporte_Tipo_Unidad_Transporte1`
    FOREIGN KEY (`id_tipo_unidad_transporte`)
    REFERENCES `inf226g1`.`Tipo_Unidad_Transporte` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Despacho`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Despacho` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Despacho` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_unidad_transporte` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Despacho_Unidad_Transporte1_idx` (`id_unidad_transporte` ASC),
  CONSTRAINT `fk_Despacho_Unidad_Transporte1`
    FOREIGN KEY (`id_unidad_transporte`)
    REFERENCES `inf226g1`.`Unidad_Transporte` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Pallet`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Pallet` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Pallet` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `ean128` VARCHAR(128) NULL,
  `id_ubicacion` INT NOT NULL,
  `id_tipo_pallet` INT NOT NULL,
  `fecha_registro` DATETIME NULL,
  `Despacho_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Pallet_Ubicacion1_idx` (`id_ubicacion` ASC),
  INDEX `fk_Pallet_Tipo_Pallet1_idx` (`id_tipo_pallet` ASC),
  INDEX `fk_Pallet_Despacho1_idx` (`Despacho_id` ASC),
  CONSTRAINT `fk_Pallet_Ubicacion1`
    FOREIGN KEY (`id_ubicacion`)
    REFERENCES `inf226g1`.`Ubicacion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pallet_Tipo_Pallet1`
    FOREIGN KEY (`id_tipo_pallet`)
    REFERENCES `inf226g1`.`Tipo_Pallet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pallet_Despacho1`
    FOREIGN KEY (`Despacho_id`)
    REFERENCES `inf226g1`.`Despacho` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Producto` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Producto` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(60) NULL,
  `descripcion` VARCHAR(200) NULL,
  `stock_total` INT NULL,
  `cantidad_unidades` INT NULL,
  `Condicion_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Producto_Condicion1_idx` (`Condicion_id` ASC),
  CONSTRAINT `fk_Producto_Condicion1`
    FOREIGN KEY (`Condicion_id`)
    REFERENCES `inf226g1`.`Condicion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Item_Producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Item_Producto` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Item_Producto` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `ean13` VARCHAR(13) NULL,
  `fecha_vencimiento` DATE NULL,
  `fecha_registro` DATETIME NULL,
  `id_pallet` INT NOT NULL,
  `id_producto` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Item_Producto_Pallet1_idx` (`id_pallet` ASC),
  INDEX `fk_Item_Producto_Producto1_idx` (`id_producto` ASC),
  CONSTRAINT `fk_Item_Producto_Pallet1`
    FOREIGN KEY (`id_pallet`)
    REFERENCES `inf226g1`.`Pallet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Item_Producto_Producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `inf226g1`.`Producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Tipo_Pallet_X_Producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Tipo_Pallet_X_Producto` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Tipo_Pallet_X_Producto` (
  `id_tipo_pallet` INT NOT NULL,
  `id_producto` INT NOT NULL,
  `cantidad_productos` INT NULL,
  PRIMARY KEY (`id_tipo_pallet`, `id_producto`),
  INDEX `fk_Tipo_Pallet_has_Producto_Producto1_idx` (`id_producto` ASC),
  INDEX `fk_Tipo_Pallet_has_Producto_Tipo_Pallet1_idx` (`id_tipo_pallet` ASC),
  CONSTRAINT `fk_Tipo_Pallet_has_Producto_Tipo_Pallet1`
    FOREIGN KEY (`id_tipo_pallet`)
    REFERENCES `inf226g1`.`Tipo_Pallet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Tipo_Pallet_has_Producto_Producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `inf226g1`.`Producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Cliente` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Cliente` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(60) NULL,
  `ruc` VARCHAR(11) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Local`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Local` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Local` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `latitud` DOUBLE NULL,
  `longitud` DOUBLE NULL,
  `nombre` VARCHAR(60) NULL,
  `descripcion` VARCHAR(200) NULL,
  `direccion` VARCHAR(200) NULL,
  `Cliente_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Local_Cliente1_idx` (`Cliente_id` ASC),
  CONSTRAINT `fk_Local_Cliente1`
    FOREIGN KEY (`Cliente_id`)
    REFERENCES `inf226g1`.`Cliente` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Pedido`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Pedido` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Pedido` (
  `idPedido` INT NOT NULL AUTO_INCREMENT,
  `Local_id` INT NOT NULL,
  PRIMARY KEY (`idPedido`),
  INDEX `fk_Pedido_Local1_idx` (`Local_id` ASC),
  CONSTRAINT `fk_Pedido_Local1`
    FOREIGN KEY (`Local_id`)
    REFERENCES `inf226g1`.`Local` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Guia_Remision`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Guia_Remision` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Guia_Remision` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_despacho` INT NOT NULL,
  `id_pedido_parcial` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Guia_Remision_Despacho1_idx` (`id_despacho` ASC),
  INDEX `fk_Guia_Remision_Pedido_Parcial1_idx` (`id_pedido_parcial` ASC),
  CONSTRAINT `fk_Guia_Remision_Despacho1`
    FOREIGN KEY (`id_despacho`)
    REFERENCES `inf226g1`.`Despacho` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Guia_Remision_Pedido_Parcial1`
    FOREIGN KEY (`id_pedido_parcial`)
    REFERENCES `inf226g1`.`Pedido_Parcial` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Pedido_Parcial`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Pedido_Parcial` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Pedido_Parcial` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_despacho` INT NULL,
  `id_pedido` INT NOT NULL,
  `id_guia_remision` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Pedido_Parcial_Despacho1_idx` (`id_despacho` ASC),
  INDEX `fk_Pedido_Parcial_Pedido1_idx` (`id_pedido` ASC),
  INDEX `fk_Pedido_Parcial_Guia_Remision1_idx` (`id_guia_remision` ASC),
  CONSTRAINT `fk_Pedido_Parcial_Despacho1`
    FOREIGN KEY (`id_despacho`)
    REFERENCES `inf226g1`.`Despacho` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pedido_Parcial_Pedido1`
    FOREIGN KEY (`id_pedido`)
    REFERENCES `inf226g1`.`Pedido` (`idPedido`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pedido_Parcial_Guia_Remision1`
    FOREIGN KEY (`id_guia_remision`)
    REFERENCES `inf226g1`.`Guia_Remision` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Tipo_Unidad_Transporte_X_Tipo_Pallet`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Tipo_Unidad_Transporte_X_Tipo_Pallet` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Tipo_Unidad_Transporte_X_Tipo_Pallet` (
  `id_tipo_unidad_transporte` INT NOT NULL,
  `id_tipo_pallet` INT NOT NULL,
  PRIMARY KEY (`id_tipo_unidad_transporte`, `id_tipo_pallet`),
  INDEX `fk_Tipo_Unidad_Transporte_has_Tipo_Pallet_Tipo_Pallet1_idx` (`id_tipo_pallet` ASC),
  INDEX `fk_Tipo_Unidad_Transporte_has_Tipo_Pallet_Tipo_Unidad_Trans_idx` (`id_tipo_unidad_transporte` ASC),
  CONSTRAINT `fk_Tipo_Unidad_Transporte_has_Tipo_Pallet_Tipo_Unidad_Transpo1`
    FOREIGN KEY (`id_tipo_unidad_transporte`)
    REFERENCES `inf226g1`.`Tipo_Unidad_Transporte` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Tipo_Unidad_Transporte_has_Tipo_Pallet_Tipo_Pallet1`
    FOREIGN KEY (`id_tipo_pallet`)
    REFERENCES `inf226g1`.`Tipo_Pallet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Historial_Movimientos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Historial_Movimientos` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Historial_Movimientos` (
  `id_pallet` INT NOT NULL,
  `id_almacen_in` INT NOT NULL,
  `id_almacen_out` INT NOT NULL,
  PRIMARY KEY (`id_pallet`, `id_almacen_in`, `id_almacen_out`),
  INDEX `fk_Pallet_has_Almacen_Almacen1_idx` (`id_almacen_in` ASC),
  INDEX `fk_Pallet_has_Almacen_Pallet1_idx` (`id_pallet` ASC),
  INDEX `fk_Pallet_has_Almacen_Almacen2_idx` (`id_almacen_out` ASC),
  CONSTRAINT `fk_Pallet_has_Almacen_Pallet1`
    FOREIGN KEY (`id_pallet`)
    REFERENCES `inf226g1`.`Pallet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pallet_has_Almacen_Almacen1`
    FOREIGN KEY (`id_almacen_in`)
    REFERENCES `inf226g1`.`Almacen` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pallet_has_Almacen_Almacen2`
    FOREIGN KEY (`id_almacen_out`)
    REFERENCES `inf226g1`.`Almacen` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Kardex`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Kardex` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Kardex` (
  `id_producto` INT NOT NULL,
  `id_almacen` INT NOT NULL,
  `cantidad` INT NULL,
  `fecha` DATETIME NULL,
  `tipo_movimiento` VARCHAR(20) NULL,
  PRIMARY KEY (`id_producto`, `id_almacen`),
  INDEX `fk_Producto_has_Almacen_Almacen1_idx` (`id_almacen` ASC),
  INDEX `fk_Producto_has_Almacen_Producto1_idx` (`id_producto` ASC),
  CONSTRAINT `fk_Producto_has_Almacen_Producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `inf226g1`.`Producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Producto_has_Almacen_Almacen1`
    FOREIGN KEY (`id_almacen`)
    REFERENCES `inf226g1`.`Almacen` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Pedido_Parcial_X_Producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Pedido_Parcial_X_Producto` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Pedido_Parcial_X_Producto` (
  `id_pedido_parcial` INT NOT NULL,
  `id_producto` INT NOT NULL,
  `cantidad_pallets` INT NULL,
  PRIMARY KEY (`id_pedido_parcial`, `id_producto`),
  INDEX `fk_Pedido_Parcial_has_Producto_Producto1_idx` (`id_producto` ASC),
  INDEX `fk_Pedido_Parcial_has_Producto_Pedido_Parcial1_idx` (`id_pedido_parcial` ASC),
  CONSTRAINT `fk_Pedido_Parcial_has_Producto_Pedido_Parcial1`
    FOREIGN KEY (`id_pedido_parcial`)
    REFERENCES `inf226g1`.`Pedido_Parcial` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pedido_Parcial_has_Producto_Producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `inf226g1`.`Producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Orden_Internamiento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Orden_Internamiento` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Orden_Internamiento` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `fecha` DATETIME NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Orden_Internamiento_X_Producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Orden_Internamiento_X_Producto` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Orden_Internamiento_X_Producto` (
  `id_orden_internamiento` INT NOT NULL,
  `id_producto` INT NOT NULL,
  `cantidad` INT NULL,
  `cantidad_ingresada` VARCHAR(45) NULL,
  PRIMARY KEY (`id_orden_internamiento`, `id_producto`),
  INDEX `fk_Orden_Internamiento_has_Producto_Producto1_idx` (`id_producto` ASC),
  INDEX `fk_Orden_Internamiento_has_Producto_Orden_Internamiento1_idx` (`id_orden_internamiento` ASC),
  CONSTRAINT `fk_Orden_Internamiento_has_Producto_Orden_Internamiento1`
    FOREIGN KEY (`id_orden_internamiento`)
    REFERENCES `inf226g1`.`Orden_Internamiento` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Orden_Internamiento_has_Producto_Producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `inf226g1`.`Producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Perfil`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Perfil` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Perfil` (
  `idPerfil` INT NOT NULL AUTO_INCREMENT,
  `nombre_perfil` VARCHAR(45) NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`idPerfil`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Pregunta_Secreta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Pregunta_Secreta` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Pregunta_Secreta` (
  `idPregunta_Secreta` INT NOT NULL AUTO_INCREMENT,
  `Pregunta` VARCHAR(200) NULL,
  PRIMARY KEY (`idPregunta_Secreta`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Usuario` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Usuario` (
  `idUsuario` CHAR(40) NOT NULL,
  `correo` VARCHAR(100) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  `nombre` VARCHAR(50) NULL,
  `apellido_paterno` VARCHAR(50) NULL,
  `apellido_materno` VARCHAR(50) NULL,
  `respuesta` VARCHAR(45) NULL,
  `idPerfil` INT NULL,
  `idPregunta_Secreta` INT NULL,
  `estado` INT NULL,
  PRIMARY KEY (`idUsuario`),
  INDEX `fk_Usuario_Perfil1_idx` (`idPerfil` ASC),
  INDEX `fk_Usuario_Pregunta_Secreta1_idx` (`idPregunta_Secreta` ASC),
  CONSTRAINT `fk_Usuario_Perfil1`
    FOREIGN KEY (`idPerfil`)
    REFERENCES `inf226g1`.`Perfil` (`idPerfil`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Usuario_Pregunta_Secreta1`
    FOREIGN KEY (`idPregunta_Secreta`)
    REFERENCES `inf226g1`.`Pregunta_Secreta` (`idPregunta_Secreta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Accion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Accion` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Accion` (
  `idAccion` INT NOT NULL,
  `nombre` VARCHAR(80) NULL,
  PRIMARY KEY (`idAccion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inf226g1`.`Perfil_X_Accion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inf226g1`.`Perfil_X_Accion` ;

CREATE TABLE IF NOT EXISTS `inf226g1`.`Perfil_X_Accion` (
  `idPerfil` INT NOT NULL,
  `idAccion` INT NOT NULL,
  PRIMARY KEY (`idPerfil`, `idAccion`),
  INDEX `fk_Perfil_has_Accion_Accion1_idx` (`idAccion` ASC),
  INDEX `fk_Perfil_has_Accion_Perfil1_idx` (`idPerfil` ASC),
  CONSTRAINT `fk_Perfil_has_Accion_Perfil1`
    FOREIGN KEY (`idPerfil`)
    REFERENCES `inf226g1`.`Perfil` (`idPerfil`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Perfil_has_Accion_Accion1`
    FOREIGN KEY (`idAccion`)
    REFERENCES `inf226g1`.`Accion` (`idAccion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
