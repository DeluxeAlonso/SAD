-- MySQL Script generated by MySQL Workbench
-- 06/16/15 17:29:18
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema saddb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `saddb` ;

-- -----------------------------------------------------
-- Schema saddb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `saddb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `saddb` ;

-- -----------------------------------------------------
-- Table `saddb`.`accion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`accion` ;

CREATE TABLE IF NOT EXISTS `saddb`.`accion` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(80) NULL,
  `id_padre` INT(11) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_accion_accion1_idx` (`id_padre` ASC),
  CONSTRAINT `fk_accion_accion1`
    FOREIGN KEY (`id_padre`)
    REFERENCES `saddb`.`accion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`condicion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`condicion` ;

CREATE TABLE IF NOT EXISTS `saddb`.`condicion` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(60) NULL DEFAULT NULL,
  `descripcion` VARCHAR(200) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`almacen`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`almacen` ;

CREATE TABLE IF NOT EXISTS `saddb`.`almacen` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(200) NULL DEFAULT NULL,
  `capacidad` INT(11) NULL DEFAULT NULL,
  `area` INT(11) NULL DEFAULT NULL,
  `fecha_registro` DATETIME NULL DEFAULT NULL,
  `estado` INT NULL DEFAULT NULL,
  `ubic_libres` INT(11) NULL DEFAULT NULL,
  `id_condicion` INT(11) NOT NULL,
  `num_filas` INT NULL DEFAULT NULL,
  `num_columnas` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Almacen_Tipo_Almacen_idx` (`id_condicion` ASC),
  CONSTRAINT `fk_Almacen_Tipo_Almacen`
    FOREIGN KEY (`id_condicion`)
    REFERENCES `saddb`.`condicion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`cliente` ;

CREATE TABLE IF NOT EXISTS `saddb`.`cliente` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(60) NULL DEFAULT NULL,
  `ruc` VARCHAR(11) NULL DEFAULT NULL,
  `estado` INT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`tipo_unidad_transporte`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`tipo_unidad_transporte` ;

CREATE TABLE IF NOT EXISTS `saddb`.`tipo_unidad_transporte` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(200) NULL DEFAULT NULL,
  `id_condicion` INT(11) NOT NULL,
  `capacidad_pallets` INT NULL,
  `velocidad_promedio` DOUBLE NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Tipo_Unidad_Transporte_Condicion1_idx` (`id_condicion` ASC),
  CONSTRAINT `fk_Tipo_Unidad_Transporte_Condicion1`
    FOREIGN KEY (`id_condicion`)
    REFERENCES `saddb`.`condicion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`unidad_transporte`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`unidad_transporte` ;

CREATE TABLE IF NOT EXISTS `saddb`.`unidad_transporte` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `transportista` VARCHAR(60) NULL DEFAULT NULL,
  `placa` VARCHAR(6) NULL DEFAULT NULL,
  `id_tipo_unidad_transporte` INT(11) NOT NULL,
  `estado` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Unidad_Transporte_Tipo_Unidad_Transporte1_idx` (`id_tipo_unidad_transporte` ASC),
  CONSTRAINT `fk_Unidad_Transporte_Tipo_Unidad_Transporte1`
    FOREIGN KEY (`id_tipo_unidad_transporte`)
    REFERENCES `saddb`.`tipo_unidad_transporte` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`despacho`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`despacho` ;

CREATE TABLE IF NOT EXISTS `saddb`.`despacho` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `fecha_despacho` DATETIME NULL,
  `estado` INT NULL,
  `id_unidad_transporte` INT(11) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_despacho_unidad_transporte1_idx` (`id_unidad_transporte` ASC),
  CONSTRAINT `fk_despacho_unidad_transporte1`
    FOREIGN KEY (`id_unidad_transporte`)
    REFERENCES `saddb`.`unidad_transporte` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`guia_remision`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`guia_remision` ;

CREATE TABLE IF NOT EXISTS `saddb`.`guia_remision` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_despacho` INT(11) NOT NULL,
  `id_cliente` INT(11) NOT NULL,
  `estado` INT NULL,
  `orden_visita` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Guia_Remision_Despacho1_idx` (`id_despacho` ASC),
  INDEX `fk_guia_remision_cliente1_idx` (`id_cliente` ASC),
  CONSTRAINT `fk_Guia_Remision_Despacho1`
    FOREIGN KEY (`id_despacho`)
    REFERENCES `saddb`.`despacho` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_guia_remision_cliente1`
    FOREIGN KEY (`id_cliente`)
    REFERENCES `saddb`.`cliente` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`tipo_producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`tipo_producto` ;

CREATE TABLE IF NOT EXISTS `saddb`.`tipo_producto` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(60) NULL DEFAULT NULL,
  `descripcion` VARCHAR(200) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`producto` ;

CREATE TABLE IF NOT EXISTS `saddb`.`producto` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_condicion` INT(11) NOT NULL,
  `id_tipo_producto` INT(11) NOT NULL,
  `nombre` VARCHAR(60) NULL DEFAULT NULL,
  `descripcion` VARCHAR(200) NULL DEFAULT NULL,
  `ean13` VARCHAR(13) NULL,
  `cantidad_productos_en_pallet` INT NULL,
  `peso` DOUBLE NULL,
  `pallets_ubicados` INT NULL DEFAULT NULL,
  `pallets_registrados` INT NULL DEFAULT NULL,
  `stock_logico` INT NULL DEFAULT NULL,
  `stock_total` INT NULL,
  `unidad` VARCHAR(60) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Producto_Condicion1_idx` (`id_condicion` ASC),
  INDEX `fk_producto_tipo_producto1_idx` (`id_tipo_producto` ASC),
  CONSTRAINT `fk_Producto_Condicion1`
    FOREIGN KEY (`id_condicion`)
    REFERENCES `saddb`.`condicion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_producto_tipo_producto1`
    FOREIGN KEY (`id_tipo_producto`)
    REFERENCES `saddb`.`tipo_producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`kardex`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`kardex` ;

CREATE TABLE IF NOT EXISTS `saddb`.`kardex` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_producto` INT(11) NOT NULL,
  `id_almacen` INT(11) NOT NULL,
  `cantidad` INT(11) NULL DEFAULT NULL,
  `fecha` DATETIME NULL DEFAULT NULL,
  `tipo_movimiento` VARCHAR(60) NULL DEFAULT NULL,
  `stock_inicial` INT NULL,
  `stock_final` INT NULL,
  PRIMARY KEY (`id`, `id_producto`, `id_almacen`),
  INDEX `fk_Producto_has_Almacen_Almacen1_idx` (`id_almacen` ASC),
  INDEX `fk_Producto_has_Almacen_Producto1_idx` (`id_producto` ASC),
  CONSTRAINT `fk_Producto_has_Almacen_Almacen1`
    FOREIGN KEY (`id_almacen`)
    REFERENCES `saddb`.`almacen` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Producto_has_Almacen_Producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `saddb`.`producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`local`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`local` ;

CREATE TABLE IF NOT EXISTS `saddb`.`local` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `latitud` DOUBLE NULL DEFAULT NULL,
  `longitud` DOUBLE NULL DEFAULT NULL,
  `nombre` VARCHAR(60) NULL DEFAULT NULL,
  `descripcion` VARCHAR(200) NULL DEFAULT NULL,
  `direccion` VARCHAR(200) NULL DEFAULT NULL,
  `id_cliente` INT(11) NOT NULL,
  `estado` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Local_Cliente1_idx` (`id_cliente` ASC),
  CONSTRAINT `fk_Local_Cliente1`
    FOREIGN KEY (`id_cliente`)
    REFERENCES `saddb`.`cliente` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`orden_internamiento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`orden_internamiento` ;

CREATE TABLE IF NOT EXISTS `saddb`.`orden_internamiento` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `fecha` DATETIME NULL DEFAULT NULL,
  `estado` INT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`rack`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`rack` ;

CREATE TABLE IF NOT EXISTS `saddb`.`rack` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `num_fil` INT(11) NULL DEFAULT NULL,
  `num_col` INT(11) NULL DEFAULT NULL,
  `estado` INT NULL DEFAULT NULL,
  `fecha_registro` DATETIME NULL DEFAULT NULL,
  `id_almacen` INT(11) NOT NULL,
  `ubic_libres` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Rack_Almacen1_idx` (`id_almacen` ASC),
  CONSTRAINT `fk_Rack_Almacen1`
    FOREIGN KEY (`id_almacen`)
    REFERENCES `saddb`.`almacen` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`ubicacion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`ubicacion` ;

CREATE TABLE IF NOT EXISTS `saddb`.`ubicacion` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `fila` INT(11) NULL DEFAULT NULL,
  `columna` INT(11) NULL DEFAULT NULL,
  `lado` VARCHAR(1) NULL DEFAULT NULL,
  `id_rack` INT(11) NOT NULL,
  `estado` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Ubicacion_Rack1_idx` (`id_rack` ASC),
  CONSTRAINT `fk_Ubicacion_Rack1`
    FOREIGN KEY (`id_rack`)
    REFERENCES `saddb`.`rack` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`pedido`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`pedido` ;

CREATE TABLE IF NOT EXISTS `saddb`.`pedido` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_local` INT(11) NOT NULL,
  `estado` INT NULL,
  `id_cliente` INT(11) NOT NULL,
  `fecha` DATETIME NULL,
  `fecha_vencimiento` DATETIME NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Pedido_Local1_idx` (`id_local` ASC),
  INDEX `fk_pedido_cliente1_idx` (`id_cliente` ASC),
  CONSTRAINT `fk_Pedido_Local1`
    FOREIGN KEY (`id_local`)
    REFERENCES `saddb`.`local` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pedido_cliente1`
    FOREIGN KEY (`id_cliente`)
    REFERENCES `saddb`.`cliente` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`pedido_parcial`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`pedido_parcial` ;

CREATE TABLE IF NOT EXISTS `saddb`.`pedido_parcial` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_pedido` INT(11) NOT NULL,
  `id_guia_remision` INT(11) NULL,
  `estado` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Pedido_Parcial_Pedido1_idx` (`id_pedido` ASC),
  INDEX `fk_Pedido_Parcial_Guia_Remision1_idx` (`id_guia_remision` ASC),
  CONSTRAINT `fk_Pedido_Parcial_Guia_Remision1`
    FOREIGN KEY (`id_guia_remision`)
    REFERENCES `saddb`.`guia_remision` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pedido_Parcial_Pedido1`
    FOREIGN KEY (`id_pedido`)
    REFERENCES `saddb`.`pedido` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`pallet`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`pallet` ;

CREATE TABLE IF NOT EXISTS `saddb`.`pallet` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `ean128` VARCHAR(128) NULL DEFAULT NULL,
  `id_ubicacion` INT(11) NULL,
  `fecha_registro` DATETIME NULL DEFAULT NULL,
  `fecha_vencimiento` DATE NULL,
  `estado` INT NULL,
  `id_producto` INT(11) NOT NULL,
  `id_orden_internamiento` INT(11) NULL,
  `id_pedido_parcial` INT(11) NULL,
  `fecha_internamiento` DATETIME NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Pallet_Ubicacion1_idx` (`id_ubicacion` ASC),
  INDEX `fk_pallet_producto1_idx` (`id_producto` ASC),
  INDEX `fk_pallet_orden_internamiento1_idx` (`id_orden_internamiento` ASC),
  INDEX `fk_pallet_pedido_parcial1_idx` (`id_pedido_parcial` ASC),
  CONSTRAINT `fk_Pallet_Ubicacion1`
    FOREIGN KEY (`id_ubicacion`)
    REFERENCES `saddb`.`ubicacion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pallet_producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `saddb`.`producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pallet_orden_internamiento1`
    FOREIGN KEY (`id_orden_internamiento`)
    REFERENCES `saddb`.`orden_internamiento` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pallet_pedido_parcial1`
    FOREIGN KEY (`id_pedido_parcial`)
    REFERENCES `saddb`.`pedido_parcial` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`perfil`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`perfil` ;

CREATE TABLE IF NOT EXISTS `saddb`.`perfil` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nombre_perfil` VARCHAR(45) NULL DEFAULT NULL,
  `descripcion` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`perfil_x_accion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`perfil_x_accion` ;

CREATE TABLE IF NOT EXISTS `saddb`.`perfil_x_accion` (
  `id_perfil` INT(11) NOT NULL,
  `id_accion` INT(11) NOT NULL,
  PRIMARY KEY (`id_perfil`, `id_accion`),
  INDEX `fk_Perfil_has_Accion_Accion1_idx` (`id_accion` ASC),
  INDEX `fk_Perfil_has_Accion_Perfil1_idx` (`id_perfil` ASC),
  CONSTRAINT `fk_Perfil_has_Accion_Accion1`
    FOREIGN KEY (`id_accion`)
    REFERENCES `saddb`.`accion` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Perfil_has_Accion_Perfil1`
    FOREIGN KEY (`id_perfil`)
    REFERENCES `saddb`.`perfil` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`pregunta_secreta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`pregunta_secreta` ;

CREATE TABLE IF NOT EXISTS `saddb`.`pregunta_secreta` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `pregunta` VARCHAR(200) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`usuario` ;

CREATE TABLE IF NOT EXISTS `saddb`.`usuario` (
  `id` CHAR(40) NOT NULL,
  `correo` VARCHAR(100) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  `nombre` VARCHAR(50) NULL DEFAULT NULL,
  `apellido_paterno` VARCHAR(50) NULL DEFAULT NULL,
  `apellido_materno` VARCHAR(50) NULL DEFAULT NULL,
  `respuesta` VARCHAR(45) NULL DEFAULT NULL,
  `id_perfil` INT(11) NULL,
  `id_pregunta_secreta` INT(11) NULL DEFAULT NULL,
  `estado` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Usuario_Perfil1_idx` (`id_perfil` ASC),
  INDEX `fk_Usuario_Pregunta_Secreta1_idx` (`id_pregunta_secreta` ASC),
  CONSTRAINT `fk_Usuario_Perfil1`
    FOREIGN KEY (`id_perfil`)
    REFERENCES `saddb`.`perfil` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Usuario_Pregunta_Secreta1`
    FOREIGN KEY (`id_pregunta_secreta`)
    REFERENCES `saddb`.`pregunta_secreta` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`pedido_parcial_x_producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`pedido_parcial_x_producto` ;

CREATE TABLE IF NOT EXISTS `saddb`.`pedido_parcial_x_producto` (
  `id_pedido_parcial` INT(11) NOT NULL,
  `id_producto` INT(11) NOT NULL,
  `cantidad` INT NULL,
  PRIMARY KEY (`id_pedido_parcial`, `id_producto`),
  INDEX `fk_pedido_parcial_has_producto_producto1_idx` (`id_producto` ASC),
  INDEX `fk_pedido_parcial_has_producto_pedido_parcial1_idx` (`id_pedido_parcial` ASC),
  CONSTRAINT `fk_pedido_parcial_has_producto_pedido_parcial1`
    FOREIGN KEY (`id_pedido_parcial`)
    REFERENCES `saddb`.`pedido_parcial` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pedido_parcial_has_producto_producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `saddb`.`producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`orden_internamiento_x_producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`orden_internamiento_x_producto` ;

CREATE TABLE IF NOT EXISTS `saddb`.`orden_internamiento_x_producto` (
  `id_orden_internamiento` INT(11) NOT NULL,
  `id_producto` INT(11) NOT NULL,
  `cantidad` INT NULL,
  `cantidad_ingresada` INT NULL,
  PRIMARY KEY (`id_orden_internamiento`, `id_producto`),
  INDEX `fk_orden_internamiento_has_producto_producto1_idx` (`id_producto` ASC),
  INDEX `fk_orden_internamiento_has_producto_orden_internamiento1_idx` (`id_orden_internamiento` ASC),
  CONSTRAINT `fk_orden_internamiento_has_producto_orden_internamiento1`
    FOREIGN KEY (`id_orden_internamiento`)
    REFERENCES `saddb`.`orden_internamiento` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_orden_internamiento_has_producto_producto1`
    FOREIGN KEY (`id_producto`)
    REFERENCES `saddb`.`producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `saddb`.`log`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`log` ;

CREATE TABLE IF NOT EXISTS `saddb`.`log` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `fecha_creacion` DATETIME NULL,
  `tipo` INT NULL,
  `fecha_actualizacion` DATETIME NULL,
  `usuario_creador` CHAR(40) NULL,
  `id_objeto` VARCHAR(45) NULL,
  `ip` VARCHAR(15) NULL,
  `mac` VARCHAR(17) NULL,
  `usuario_actualizador` CHAR(40) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_log_usuario1_idx` (`usuario_creador` ASC),
  INDEX `fk_log_usuario2_idx` (`usuario_actualizador` ASC),
  CONSTRAINT `fk_log_usuario1`
    FOREIGN KEY (`usuario_creador`)
    REFERENCES `saddb`.`usuario` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_log_usuario2`
    FOREIGN KEY (`usuario_actualizador`)
    REFERENCES `saddb`.`usuario` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `saddb`.`sesion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `saddb`.`sesion` ;

CREATE TABLE IF NOT EXISTS `saddb`.`sesion` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `inicio_sesion` DATETIME NULL,
  `fin_sesion` DATETIME NULL,
  `usuario_id` CHAR(40) NULL,
  `ip` VARCHAR(15) NULL,
  `mac` VARCHAR(17) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_sesion_usuario1_idx` (`usuario_id` ASC),
  CONSTRAINT `fk_sesion_usuario1`
    FOREIGN KEY (`usuario_id`)
    REFERENCES `saddb`.`usuario` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
